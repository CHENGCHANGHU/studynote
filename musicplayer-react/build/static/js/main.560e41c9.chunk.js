(this["webpackJsonpmusicplayer-react"]=this["webpackJsonpmusicplayer-react"]||[]).push([[0],{133:function(e,t,r){e.exports=r(350)},340:function(e,t,r){},341:function(e,t,r){},342:function(e,t,r){e.exports=r.p+"static/media/sunset-road.94c8ebf5.jpg"},343:function(e,t,r){e.exports=r.p+"static/media/sunset-road.cc52929d.mp3"},344:function(e,t,r){e.exports=r.p+"static/media/drift-north.81bdc6ee.jpg"},345:function(e,t,r){e.exports=r.p+"static/media/drift-north.24ba70c3.mp3"},346:function(e,t,r){e.exports=r.p+"static/media/skin.3d6ddd11.jpg"},347:function(e,t,r){e.exports=r.p+"static/media/skin.9da8c78e.mp3"},348:function(e,t,r){e.exports=r.p+"static/media/another-year.1a12fbd6.jpg"},349:function(e,t,r){e.exports=r.p+"static/media/another-year.b283adba.mp3"},350:function(e,t,r){"use strict";r.r(t);var n=r(3),c=r.n(n),a=r(132),o=r.n(a);r(138),r(340),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(341);function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,r,n,c,a,o){try{var i=e[a](o),s=i.value}catch(u){return void r(u)}i.done?t(s):Promise.resolve(s).then(n,c)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,c){var a=e.apply(t,r);function o(e){s(a,n,c,o,i,"next",e)}function i(e){s(a,n,c,o,i,"throw",e)}o(void 0)}))}}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,n,a,o,i=(t=s,function(){var e,r=v(t);if(g()){var n=v(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return h(this,e)});function s(){var e;p(this,s),M(y(e=i.apply(this,arguments)),"openMusicPanel",(function(){e.setState(d({},e.state,{panelFlag:!e.state.panelFlag}))})),M(y(e),"playMusic",(function(){console.log("MusicPlayer: \u64ad\u653e\u6b4c\u66f2"),e.setState(d({},e.state,{playFlag:!0})),console.log(e.state.theMusicAudio.currentTime,e.state.currMusicDuration),e.state.theMusicAudio.play()})),M(y(e),"pauseMusic",(function(){console.log("MusicPlayer: \u6682\u505c\u6b4c\u66f2"),e.setState(d({},e.state,{playFlag:!1})),e.state.theMusicAudio.pause()})),M(y(e),"changeMusicByMusicPanel",function(){var t=u(regeneratorRuntime.mark((function t(r,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n,r.id,r.title),e.state.theMusicAudio.src=r.musicSrc,t.next=4,e.playMusic();case 4:e.setState(d({},e.state,{currMusicObj:r,currMusicIndex:n}));case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),M(y(e),"changeMusicByPrev",u(regeneratorRuntime.mark((function t(){var r,n,c,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.theMusicAudio,c=r.currMusicIndex,a=r.musicList,o=c>0?c-1:a.length-1,n.src=a[o].musicSrc,t.next=5,e.setState(d({},e.state,{currMusicObj:a[o],currMusicIndex:o}));case 5:e.playMusic();case 6:case"end":return t.stop()}}),t)})))),M(y(e),"changeMusicByNext",u(regeneratorRuntime.mark((function t(){var r,n,c,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.theMusicAudio,c=r.currMusicIndex,a=r.musicList,o=c<a.length-1?c+1:0,n.src=a[o].musicSrc,t.next=5,e.setState(d({},e.state,{currMusicObj:a[o],currMusicIndex:o}));case 5:e.playMusic();case 6:case"end":return t.stop()}}),t)})))),M(y(e),"clickProgressBarHandler",(function(t){var r=e.state,n=r.theMusicAudio,c=r.currMusicDuration,a=t.clientX,o=t.target,i=o.offsetLeft,s=o.offsetWidth,u=Math.min(1,Math.max(0,(a-i)/s));console.log("\u8fdb\u5ea6\u6761\u70b9\u51fb\u4e8b\u4ef6",a,i,s,u),n.currentTime=u*c,e.setState(d({},e.state,{currMusicTime:u*c}))})),M(y(e),"clickPlayedBarHandler",(function(t){var r=e.state,n=r.theMusicAudio,c=r.currMusicDuration,a=t.clientX,o=t.target.parentNode,i=o.offsetLeft,s=o.offsetWidth,u=Math.min(1,Math.max(0,(a-i)/s));console.log("\u5df2\u64ad\u653e\u8fdb\u5ea6\u6761\u70b9\u51fb\u4e8b\u4ef6",a,i,s,u),n.currentTime=u*c,e.setState(d({},e.state,{currMusicTime:u*c}))})),M(y(e),"mouseDownControllerHandler",function(){var t=u(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("\u8fdb\u5ea6\u63a7\u5236\u5668\u6309\u4e0b\u4e8b\u4ef6",r.clientX,r.target.parentNode.offsetLeft),t.next=3,e.setState(d({},e.state,{controllerFlag:!0,controller:r.target}));case 3:document.addEventListener("mousemove",e.mouseMoveHandler),console.log(e.state.controllerFlag),e.pauseMusic();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),M(y(e),"mouseUpHandler",function(){var t=u(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.controllerFlag||!e.state.controller){t.next=6;break}return console.log("\u9f20\u6807\u677e\u5f00\u4e8b\u4ef6",r),t.next=4,e.setState(d({},e.state,{controllerFlag:!1,controller:null}));case 4:document.removeEventListener("mousemove",e.mouseMoveHandler),e.playMusic();case 6:r.stopPropagation();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),M(y(e),"mouseMoveHandler",(function(t){e.throttle((function(){if(e.state.controllerFlag){var r=e.state,n=r.theMusicAudio,c=r.controller.parentNode,a=c.offsetLeft,o=c.offsetWidth,i=r.currMusicDuration,s=t.clientX,u=Math.min(1,Math.max(0,(s-a)/o));n.currentTime=u*i,e.setState(d({},e.state,{currMusicTime:u*i}))}}),200)()})),M(y(e),"keyPressHandler",(function(t){console.log(t.keyCode);var r=e.state,n=(r.theMusicAudio,r.playFlag);switch(t.keyCode){case 32:n?e.pauseMusic():e.playMusic()}})),M(y(e),"durationChangeHandler",(function(){e.setState(d({},e.state,{currMusicDuration:e.state.theMusicAudio.duration}))})),M(y(e),"endedHandler",(function(){e.pauseMusic(),e.state.controllerFlag||e.changeMusicByNext()})),M(y(e),"timeUpdateHandler",(function(t){var r=e.state.theMusicAudio.currentTime,n=r/e.state.currMusicDuration*100;e.setState(d({},e.state,{currMusicTime:r,playedBarWidth:"".concat(n,"%"),controllerLeft:"".concat(n,"%")}))})),M(y(e),"sec2min",(function(e){var t=Math.floor(e/60);return e=Math.floor(e%60),"".concat(t<10?"0"+t:t,":").concat(e<10?"0"+e:e)})),M(y(e),"throttle",(function(e,t){var r=!0;return function(){if(!r)return!1;r=!1,setTimeout((function(){e(),r=!0}),t)}}));var t=new Audio(null);return e.state={theMusicAudio:t,panelFlag:!1,controllerFlag:!1,controller:null,musicList:[{id:1,title:"\u65e5\u843d\u5927\u9053",picSrc:r(342),musicSrc:r(343)},{id:2,title:"\u98d8\u5411\u5317\u65b9",picSrc:r(344),musicSrc:r(345)},{id:3,title:"Skin",picSrc:r(346),musicSrc:r(347)},{id:4,title:"\u53c8\u8fc7\u4e86\u4e00\u5e74",picSrc:r(348),musicSrc:r(349)}],currMusicObj:null,currMusicIndex:3,currMusicDuration:0,currMusicTime:0,playedBarWidth:0,controllerLeft:0,playFlag:!1},e.state.currMusicObj=e.state.musicList[3],e.state.theMusicAudio.src=e.state.currMusicObj.musicSrc,console.log(isNaN(e.state.theMusicAudio.duration)),e}return n=s,(a=[{key:"componentDidMount",value:function(){console.log(this.__proto__.constructor.name,":componentDidMount");var e=this.state,t=e.theMusicAudio,r=e.currMusicObj;t.src=r.musicSrc,document.addEventListener("keypress",this.keyPressHandler),t.addEventListener("durationchange",this.durationChangeHandler),t.addEventListener("ended",this.endedHandler),t.addEventListener("timeupdate",this.timeUpdateHandler),document.addEventListener("mouseup",this.mouseUpHandler)}},{key:"render",value:function(){var e=this,t=this.state,r=(t.theMusicAudio,t.playFlag),n=t.panelFlag,a=t.musicList,o=t.currMusicObj,i=t.currMusicTime,s=t.playedBarWidth,u=t.controllerLeft,l=t.currMusicDuration,d=t.currMusicIndex;return c.a.createElement("div",{className:"MusicPlayer",onKeyPress:this.keyPressHandler},c.a.createElement("div",{className:"ControlBox"},c.a.createElement("div",{className:"prev"},c.a.createElement("div",{id:"prev",onClick:this.changeMusicByPrev})),c.a.createElement("div",{className:"record-cover ".concat(r?"pause-status":"play-status"),id:"recordCover"},c.a.createElement("img",{src:o.picSrc,alt:"\u5c01\u9762"}),c.a.createElement("div",{className:"pause",id:"pause",onClick:this.pauseMusic}),c.a.createElement("div",{className:"play",id:"play",onClick:this.playMusic})),c.a.createElement("div",{className:"next"},c.a.createElement("div",{id:"next",onClick:this.changeMusicByNext})),c.a.createElement("div",{className:"progress-box",id:"progressBox"},c.a.createElement("div",{className:"song-title"},c.a.createElement("span",{id:"songTitle"},o.title),c.a.createElement("span",{className:"more ".concat(n?"more-active":""),id:"more",onClick:this.openMusicPanel})),c.a.createElement("div",{className:"progress-bar",id:"progressBar",onClick:function(t){return e.clickProgressBarHandler(t)}},c.a.createElement("div",{className:"played-bar",onClick:function(t){console.log("played-bar"),e.clickPlayedBarHandler(t),t.stopPropagation()},style:{width:s},id:"playedBar"}),c.a.createElement("div",{className:"controller",onClick:function(e){console.log("click controller"),e.stopPropagation()},onMouseDown:function(t){e.mouseDownControllerHandler(t),t.preventDefault()},style:{left:u},id:"controller"})),c.a.createElement("div",{className:"song-duration"},c.a.createElement("span",{className:"curr-duration"},this.sec2min(i)),"/",c.a.createElement("span",{className:"total-duration"},this.sec2min(l)))),c.a.createElement("div",{className:"music-panel ".concat(n?"active-music-panel":""),id:"musicPanel"},c.a.createElement("div",{className:"panel-header"},"\u6b4c\u66f2\u9762\u677f",c.a.createElement("div",{className:"local-music",id:"localMusic"},"\u672c\u5730\u97f3\u4e50")),c.a.createElement("ul",{className:"music-list"},a.map((function(t,r){return c.a.createElement("li",{key:t.id,className:d===r?"active-music":""},c.a.createElement("a",{href:"#",onClick:function(n){e.changeMusicByMusicPanel(t,r),n.preventDefault()}},c.a.createElement("img",{className:"pic",src:t.picSrc}),t.title))}))))))}}])&&m(n.prototype,a),o&&m(n,o),s}(c.a.Component);o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[133,1,2]]]);
//# sourceMappingURL=main.560e41c9.chunk.js.map